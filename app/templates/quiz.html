
{% extends "base.html" %}

{% block title %}‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö MBTI ‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥{% endblock %}

{% block content %}
<div class="page-container">
    <h1>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö MBTI</h1>
    <div class="instructions">
        <h3>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
        <ul>
            <li>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 32 ‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 4 ‡∏™‡πà‡∏ß‡∏ô</li>
            <li>‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 5 ‡∏£‡∏∞‡∏î‡∏±‡∏ö ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á</li>
            <li>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏¥‡∏î ‡∏ï‡∏≠‡∏ö‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</li>
            <li>‡∏≠‡∏¢‡πà‡∏≤‡∏Ñ‡∏¥‡∏î‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏ç‡∏≤‡∏ì‡πÅ‡∏£‡∏Å</li>
        </ul>
    </div>

    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <form id="mbtiForm" method="POST">
        <div class="question-section" id="section-1">
            <h2><span class="section-icon">üë•</span> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏õ‡∏è‡∏¥‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</h2>
            <div id="ei-questions"></div>
            <div class="section-nav">
                <button type="button" class="nav-button next" id="next-section-1">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
            </div>
        </div>

        <div class="question-section" id="section-2">
            <h2><span class="section-icon">üîç</span> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°</h2>
            <div id="sn-questions"></div>
            <div class="section-nav">
                <button type="button" class="nav-button prev" id="prev-section-2">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                <button type="button" class="nav-button next" id="next-section-2">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
            </div>
        </div>

        <div class="question-section" id="section-3">
            <h2><span class="section-icon">üß†</span> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤</h2>
            <div id="tf-questions"></div>
            <div class="section-nav">
                <button type="button" class="nav-button prev" id="prev-section-3">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                <button type="button" class="nav-button next" id="next-section-3">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
            </div>
        </div>

        <div class="question-section" id="section-4">
            <h2><span class="section-icon">‚è±Ô∏è</span> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÑ‡∏•‡∏ü‡πå‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</h2>
            <div id="jp-questions"></div>
            <div class="section-nav">
                <button type="button" class="nav-button prev" id="prev-section-4">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
            </div>
        </div>

        <div class="answer-validation" id="section-validation">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏™‡πà‡∏ß‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</div>

        <input type="hidden" name="mbti_result" id="mbti_result">
        <button type="submit" id="submit-button" style="display: none;">‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
    </form>
</div>

<script>
    const questions = {
        ei: [
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏Ñ‡∏ô",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ö‡∏ó‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",
            "‡∏â‡∏±‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏•‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞ (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞",
            "‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏™‡∏ô‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ñ‡∏∂‡∏Å‡∏Ñ‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞",
            "‡∏â‡∏±‡∏ô‡∏û‡∏π‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á"
        ],
        sn: [
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÉ‡∏™‡πà‡πÉ‡∏à‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡πÄ‡∏ó‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏°‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏° (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÅ‡∏ù‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÉ‡∏ä‡πâ‡∏à‡∏¥‡∏ô‡∏ï‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏°‡∏≠‡∏á‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÉ‡∏´‡∏°‡πà‡πÜ (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)"
        ],
        tf: [
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å",
            "‡∏â‡∏±‡∏ô‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏û‡∏π‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏°‡πâ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏î‡∏µ",
            "‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏ä‡∏ô‡∏∞‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡πÅ‡∏¢‡πâ‡∏á (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏ï‡∏£‡∏£‡∏Å‡∏∞ (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏Ñ‡∏ô‡∏°‡∏±‡∏Å‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏¢‡πá‡∏ô‡∏ä‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå",
            "‡∏â‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏°‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ã‡∏∂‡πà‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)"
        ],
        jp: [
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏°‡∏≠",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ",
            "‡∏â‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏¥‡πà‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡∏∞‡∏ó‡∏±‡∏ô‡∏´‡∏±‡∏ô",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)",
            "‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏°‡∏µ‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô",
            "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏Ñ‡∏¥‡∏î (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)"
        ]
    };

    const optionValues = [2, 1, 0, -1, -2];
    const optionLabels = ["‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏¥‡πà‡∏á", "‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢", "‡πÄ‡∏â‡∏¢‡πÜ/‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à", "‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢", "‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏¥‡πà‡∏á"];
    let currentSection = 1;
    const totalSections = 4;

    function createQuestions(section, questions) {
        const container = document.getElementById(`${section}-questions`);
        container.innerHTML = '';

        questions.forEach((question, index) => {
            const isReversed = question.includes("(‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)");
            const displayQuestion = question.replace("(‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏±‡∏ö)", "");
            const questionNumber = index + (
                section === 'ei' ? 1 :
                section === 'sn' ? 9 :
                section === 'tf' ? 17 : 25
            );

            const questionDiv = document.createElement('div');
            questionDiv.className = 'question-container';
            questionDiv.innerHTML = `
                <div class="question-text">${questionNumber}. ${displayQuestion}</div>
                <div class="options">
                    ${optionValues.map((value, i) => `
                        <label class="radio-option" data-reversed="${isReversed}">
                            <input type="radio" name="q${questionNumber}" value="${isReversed ? optionValues[4-i] : value}" required>
                            <span class="option-label">${optionLabels[i]}</span>
                        </label>
                    `).join('')}
                </div>
            `;
            container.appendChild(questionDiv);
        });
    }

    function isSectionComplete(sectionNum) {
        const startQ = (sectionNum - 1) * 8 + 1;
        const endQ = sectionNum * 8;

        for (let i = startQ; i <= endQ; i++) {
            if (!document.querySelector(`input[name="q${i}"]:checked`)) {
                return false;
            }
        }
        return true;
    }

    function switchSection(oldSection, newSection) {
        if (oldSection > 0) {
            const oldSectionElement = document.getElementById(`section-${oldSection}`);
            oldSectionElement.style.display = 'none';
            oldSectionElement.classList.remove('active');
        }

        const newSectionElement = document.getElementById(`section-${newSection}`);
        newSectionElement.style.display = 'block';
        newSectionElement.classList.add('active');

        const progress = ((newSection - 1) / totalSections) * 100;
        document.getElementById('progress-bar').style.width = `${progress}%`;

        document.getElementById('submit-button').style.display = 
            newSection === totalSections ? 'block' : 'none';

        window.scrollTo({
            top: document.querySelector('.page-container').offsetTop,
            behavior: 'smooth'
        });

        currentSection = newSection;
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Create questions for all sections
        Object.entries(questions).forEach(([section, questionList]) => {
            createQuestions(section, questionList);
        });

        // Add event listeners for navigation buttons
        document.querySelectorAll('[id^="next-section-"]').forEach(button => {
            button.addEventListener('click', function() {
                const currentSectionNum = parseInt(this.id.split('-')[2]);
                if (isSectionComplete(currentSectionNum)) {
                    switchSection(currentSectionNum, currentSectionNum + 1);
                    document.getElementById('section-validation').style.display = 'none';
                } else {
                    document.getElementById('section-validation').style.display = 'block';
                }
            });
        });

        document.querySelectorAll('[id^="prev-section-"]').forEach(button => {
            button.addEventListener('click', function() {
                const currentSectionNum = parseInt(this.id.split('-')[2]);
                switchSection(currentSectionNum, currentSectionNum - 1);
                document.getElementById('section-validation').style.display = 'none';
            });
        });

        // Handle form submission
        document.getElementById('mbtiForm').addEventListener('submit', function(e) {
            e.preventDefault();

            if (!isSectionComplete(totalSections)) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö');
                return;
            }

            // Calculate MBTI result
            const formData = new FormData(this);
            let eiScore = 0, snScore = 0, tfScore = 0, jpScore = 0;

            for (let i = 1; i <= 8; i++) eiScore += parseInt(formData.get(`q${i}`) || 0);
            for (let i = 9; i <= 16; i++) snScore += parseInt(formData.get(`q${i}`) || 0);
            for (let i = 17; i <= 24; i++) tfScore += parseInt(formData.get(`q${i}`) || 0);
            for (let i = 25; i <= 32; i++) jpScore += parseInt(formData.get(`q${i}`) || 0);

            const result = `${eiScore >= 0 ? 'E' : 'I'}${snScore >= 0 ? 'S' : 'N'}${tfScore >= 0 ? 'T' : 'F'}${jpScore >= 0 ? 'J' : 'P'}`;

            // Store result in hidden field
            document.getElementById('mbti_result').value = result;

            // If user is not logged in, store in localStorage
            {% if not current_user.is_authenticated %}
                localStorage.setItem('mbti_type', result);
                localStorage.setItem('hasTakenQuiz', 'true');
            {% endif %}

            // Submit form
            this.submit();
        });

        // Show initial section
        switchSection(0, 1);
    });
</script>
{% endblock %}

{% block extra_css %}
<style>
    :root {
        --analyst-color: #BA68C8;    /* ‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡πà‡∏ß‡∏á - ‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå */
        --diplomat-color: #81C784;    /* ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß - ‡∏ô‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï */
        --guardian-color: #64B5F6;    /* ‡∏ö‡πâ‡∏≤‡∏ô‡∏ü‡πâ‡∏≤ - ‡∏ú‡∏π‡πâ‡∏û‡∏¥‡∏ó‡∏±‡∏Å‡∏©‡πå */
        --explorer-color: #FFEB3B;    /* ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á - ‡∏ô‡∏±‡∏Å‡∏™‡∏≥‡∏£‡∏ß‡∏à */
        --mbti-gradient: linear-gradient(135deg, var(--analyst-color), var(--diplomat-color), 
                                            var(--guardian-color), var(--explorer-color));
        --mbti-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        --mbti-text: #2d3436;
        --mbti-light-bg: #f7f7ff;
    }

    body {
        background-color: var(--mbti-light-bg);
        scroll-behavior: smooth;
    }

    .page-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    h1 {
        text-align: center;
        color: var(--analyst-color);
        margin-bottom: 30px;
        font-weight: 700;
        font-size: 2.5rem;
        position: relative;
        padding-bottom: 1rem;
        animation: fadeIn 0.5s ease;
    }

    h1::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 4px;
        background: var(--mbti-gradient);
    }

    .instructions {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: var(--mbti-shadow);
        border: 1px solid rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        animation: slideIn 0.5s ease;
    }

    .instructions:hover {
        transform: translateY(-3px);
    }

    .instructions h3 {
        margin-bottom: 15px;
        color: var(--mbti-text);
        font-weight: 600;
    }

    .instructions ul {
        list-style-type: none;
        padding-left: 0;
    }

    .instructions ul li {
        margin-bottom: 12px;
        padding-left: 25px;
        position: relative;
        color: var(--mbti-text);
        line-height: 1.8;
    }

    .instructions ul li::before {
        content: '‚Ä¢';
        color: var(--analyst-color);
        position: absolute;
        left: 8px;
        font-weight: bold;
    }

    .progress-container {
        width: 100%;
        height: 8px;
        background-color: #e0e0e0;
        border-radius: 4px;
        margin: 30px 0;
        overflow: hidden;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        animation: fadeIn 0.5s ease;
    }

    .progress-bar {
        height: 100%;
        background: var(--mbti-gradient);
        width: 0%;
        transition: width 0.5s ease;
        background-size: 200% 200%;
        animation: gradient-shift 5s ease infinite;
    }

    @keyframes gradient-shift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .question-section {
        margin-bottom: 40px;
        opacity: 0;
        transform: translateY(20px);
        animation: slideIn 0.5s ease forwards;
        display: none;
    }

    .question-section.active {
        display: block;
    }

    .question-section h2 {
        color: white;
        padding: 15px 20px;
        margin-bottom: 20px;
        font-size: 1.5rem;
        background: var(--mbti-gradient);
        background-size: 200% 200%;
        animation: gradient-shift 5s ease infinite;
        border-radius: 12px;
        box-shadow: var(--mbti-shadow);
        display: flex;
        align-items: center;
    }

    .question-container {
        margin-bottom: 20px;
        padding: 20px;
        border-radius: 12px;
        background: white;
        box-shadow: var(--mbti-shadow);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: fadeIn 0.5s ease;
        border: 2px solid transparent;
    }

    .question-container:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    .question-text {
        font-size: 1.1rem;
        margin-bottom: 18px;
        line-height: 1.5;
        color: var(--mbti-text);
    }

    .options {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        margin-top: 15px;
    }

    .radio-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 8px;
        cursor: pointer;
        padding: 12px 8px;
        border-radius: 12px;
        transition: all 0.3s ease;
        background: #f8f9fa;
        flex: 1;
        min-width: 0;
        border: 2px solid transparent;
    }

    .radio-option:hover {
        background: white;
        border-color: var(--analyst-color);
        transform: translateY(-2px);
        box-shadow: var(--mbti-shadow);
    }

    .radio-option input[type="radio"] {
        cursor: pointer;
        margin: 5px 0;
    }

    .radio-option input[type="radio"]:checked + .option-label {
        color: var(--analyst-color);
        font-weight: 500;
    }

    .option-label {
        font-size: 0.85rem;
        line-height: 1.3;
        word-wrap: break-word;
        transition: color 0.3s ease;
    }

    button[type="submit"] {
        display: block;
        width: max-content;
        margin: 40px auto;
        padding: 15px 40px;
        background: var(--mbti-gradient);
        background-size: 300% 300%;
        animation: gradient-shift 5s ease infinite;
        color: white;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        font-size: 1.2rem;
        font-weight: 500;
        transition: all 0.3s ease;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }

    button[type="submit"]:hover {
        transform: translateY(-3px);
        box-shadow: var(--mbti-shadow);
    }

    .answer-validation {
        color: #e74c3c;
        margin-top: 10px;
        font-size: 0.9rem;
        text-align: center;
        display: none;
        animation: fadeIn 0.3s ease;
        background: #fde8e8;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #f8b4b4;
    }

    .section-nav {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
        animation: fadeIn 0.5s ease;
    }

    .nav-button {
        padding: 12px 24px;
        border: none;
        border-radius: 30px;
        background: #f1f1f1;
        color: var(--mbti-text);
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .nav-button:hover {
        background: #e0e0e0;
        transform: translateY(-2px);
    }

    .nav-button.next {
        background: var(--mbti-gradient);
        color: white;
        background-size: 200% 200%;
        animation: gradient-shift 5s ease infinite;
    }

    .nav-button.next:hover {
        box-shadow: var(--mbti-shadow);
    }

    @media (max-width: 768px) {
        .options {
            flex-wrap: wrap;
            gap: 8px;
        }

        .radio-option {
            flex: 0 0 calc(50% - 8px);
        }

        .option-label {
            font-size: 0.8rem;
        }

        button[type="submit"] {
            width: 100%;
            padding: 15px 20px;
        }

        .nav-button {
            padding: 10px 20px;
            font-size: 0.9rem;
        }
    }
</style>
{% endblock %}
